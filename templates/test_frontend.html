<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend Component Tests</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .test-pass {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .test-fail {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .test-button {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>Frontend Prototype Tests</h1>
    
    <div class="test-section">
        <h2>API Connectivity Tests</h2>
        <button class="test-button" onclick="testAIMatchAPI()">Test AI Match API</button>
        <button class="test-button" onclick="testSectorsAPI()">Test Sectors API</button>
        <button class="test-button" onclick="testLocationsAPI()">Test Locations API</button>
        <div id="apiResults"></div>
    </div>
    
    <div class="test-section">
        <h2>UI Component Tests</h2>
        <button class="test-button" onclick="testSkillsInput()">Test Skills Input</button>
        <button class="test-button" onclick="testFormValidation()">Test Form Validation</button>
        <button class="test-button" onclick="testResponsiveDesign()">Test Responsive Design</button>
        <div id="uiResults"></div>
    </div>
    
    <div class="test-section">
        <h2>Accessibility Tests</h2>
        <button class="test-button" onclick="testKeyboardNavigation()">Test Keyboard Navigation</button>
        <button class="test-button" onclick="testScreenReader()">Test Screen Reader Support</button>
        <div id="accessibilityResults"></div>
    </div>
    
    <div class="test-section">
        <h2>Performance Tests</h2>
        <button class="test-button" onclick="testLoadingSpeed()">Test Loading Speed</button>
        <button class="test-button" onclick="testAnimations()">Test Animations</button>
        <div id="performanceResults"></div>
    </div>

    <script>
        function addTestResult(containerId, testName, passed, message) {
            const container = document.getElementById(containerId);
            const result = document.createElement('div');
            result.className = `test-result ${passed ? 'test-pass' : 'test-fail'}`;
            result.innerHTML = `
                <strong>${testName}:</strong> 
                ${passed ? '✅ PASS' : '❌ FAIL'} - ${message}
            `;
            container.appendChild(result);
        }

        async function testAIMatchAPI() {
            try {
                const testData = {
                    skills: ['Python', 'JavaScript'],
                    education: 'BTech',
                    sector: 'Information Technology',
                    location: 'Bangalore',
                    social_category: 'General',
                    district_type: 'Urban'
                };

                const response = await fetch('/api/ai-match', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(testData)
                });

                const result = await response.json();
                
                if (result.success && result.ai_recommendations) {
                    addTestResult('apiResults', 'AI Match API', true, 
                        `Successfully returned ${result.ai_recommendations.length} recommendations`);
                } else {
                    addTestResult('apiResults', 'AI Match API', false, 
                        result.error || 'No recommendations returned');
                }
            } catch (error) {
                addTestResult('apiResults', 'AI Match API', false, error.message);
            }
        }

        async function testSectorsAPI() {
            try {
                const response = await fetch('/api/sectors');
                const result = await response.json();
                
                if (result.success && result.sectors && result.sectors.length > 0) {
                    addTestResult('apiResults', 'Sectors API', true, 
                        `Successfully loaded ${result.sectors.length} sectors`);
                } else {
                    addTestResult('apiResults', 'Sectors API', false, 'No sectors returned');
                }
            } catch (error) {
                addTestResult('apiResults', 'Sectors API', false, error.message);
            }
        }

        async function testLocationsAPI() {
            try {
                const response = await fetch('/api/locations');
                const result = await response.json();
                
                if (result.success && result.locations && result.locations.length > 0) {
                    addTestResult('apiResults', 'Locations API', true, 
                        `Successfully loaded ${result.locations.length} locations`);
                } else {
                    addTestResult('apiResults', 'Locations API', false, 'No locations returned');
                }
            } catch (error) {
                addTestResult('apiResults', 'Locations API', false, error.message);
            }
        }

        function testSkillsInput() {
            // Test if we can access matchmaking page elements
            const testPassed = window.location.pathname === '/test-frontend' || 
                               document.querySelector('.skills-input') !== null;
            
            addTestResult('uiResults', 'Skills Input Component', testPassed, 
                testPassed ? 'Skills input functionality available' : 
                'Navigate to /matchmaking to test skills input');
        }

        function testFormValidation() {
            // Test basic form validation logic
            const requiredFields = ['skills', 'education'];
            const testData = { skills: [], education: '' };
            
            const hasRequiredFields = requiredFields.every(field => 
                testData.hasOwnProperty(field));
            const validationWorks = testData.skills.length === 0; // Should fail validation
            
            addTestResult('uiResults', 'Form Validation', hasRequiredFields && validationWorks, 
                hasRequiredFields ? 'Form validation logic working' : 'Validation issues detected');
        }

        function testResponsiveDesign() {
            const isMobile = window.innerWidth <= 768;
            const hasViewport = document.querySelector('meta[name="viewport"]') !== null;
            
            addTestResult('uiResults', 'Responsive Design', hasViewport, 
                hasViewport ? 
                `Viewport meta tag present. Screen width: ${window.innerWidth}px` : 
                'Missing viewport meta tag');
        }

        function testKeyboardNavigation() {
            const focusableElements = document.querySelectorAll(
                'button, input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );
            
            addTestResult('accessibilityResults', 'Keyboard Navigation', 
                focusableElements.length > 0, 
                `Found ${focusableElements.length} focusable elements`);
        }

        function testScreenReader() {
            const hasLabels = document.querySelectorAll('label').length > 0;
            const hasAltTexts = document.querySelectorAll('img[alt]').length >= 
                              document.querySelectorAll('img').length;
            
            addTestResult('accessibilityResults', 'Screen Reader Support', 
                hasLabels, 
                hasLabels ? 'Form labels present' : 'Missing form labels');
        }

        function testLoadingSpeed() {
            const startTime = performance.now();
            
            // Simulate loading test
            setTimeout(() => {
                const loadTime = performance.now() - startTime;
                addTestResult('performanceResults', 'Loading Speed', 
                    loadTime < 3000, 
                    `Page interaction ready in ${loadTime.toFixed(2)}ms`);
            }, 100);
        }

        function testAnimations() {
            const hasCSS = document.querySelectorAll('style, link[rel="stylesheet"]').length > 0;
            const supportsAnimations = CSS.supports('animation', 'spin 1s linear infinite');
            
            addTestResult('performanceResults', 'Animation Support', 
                hasCSS && supportsAnimations, 
                supportsAnimations ? 'CSS animations supported' : 'Animation support limited');
        }

        // Auto-run basic tests on page load
        window.addEventListener('load', () => {
            console.log('Frontend test page loaded');
            setTimeout(() => {
                testResponsiveDesign();
                testKeyboardNavigation();
                testAnimations();
            }, 500);
        });
    </script>
    
    <div class="test-section">
        <h2>Manual Test Checklist</h2>
        <ul>
            <li>✅ Navigate to <a href="/matchmaking">/matchmaking</a> for full interface test</li>
            <li>✅ Test on mobile device or browser developer tools</li>
            <li>✅ Verify skills input accepts and displays tags</li>
            <li>✅ Check form validation prevents empty submissions</li>
            <li>✅ Confirm loading animation shows during API calls</li>
            <li>✅ Validate match results display with scores and details</li>
            <li>✅ Test Apply button functionality</li>
            <li>✅ Verify accessibility with keyboard navigation</li>
        </ul>
    </div>
</body>
</html>